<canvas id="c"></canvas>


<script>
    const c = document.getElementById("c");
    const ctx = c.getContext("2d");

    c.width = 500;
    c.height = 500;

    let langs = [
        {
            percent: 50,
            color: "red"
        },
        {
            percent: 30,
            color: "blue"
        },
        {
            percent: 20,
            color: "green"
        }
    ]

    let animationProgress = 0;
    let radiant = 0;
    let animationFinished = false;

    function degreeToRadiant(degree) {
        return degree * Math.PI / 180;
    }
    function frame() {

        ctx.clearRect(0, 0, c.width, c.height);
        ctx.fillStyle = "lightgray";
        ctx.beginPath();
        ctx.arc(250, 250, 105, 0, Math.PI * 2);
        ctx.fill();

        for (let i = 0; i < langs.length; i++) {
            radiant += degreeToRadiant(langs[i].percent * 360 / 100);
            ctx.fillStyle = langs[i].color;
            ctx.beginPath();
            ctx.arc(250, 250, 100, radiant - degreeToRadiant(langs[i].percent * 360 / 100), radiant);
            ctx.lineTo(250, 250);

            ctx.fill();
        }

        // draw reveal animation
        if (!animationFinished && animationProgress < 100) {
            ctx.fillStyle = "white";
            ctx.beginPath();
            ctx.arc(250, 250, 101, 0, degreeToRadiant((animationProgress * 360 / 100)), true);
            ctx.lineTo(250, 250);
            ctx.fill();
        }

        ctx.fillStyle = "lightgray";
        ctx.beginPath();
        ctx.arc(250, 250, 40, 0, Math.PI * 2);
        ctx.fill();

        ctx.fillStyle = "white";
        ctx.beginPath();
        ctx.arc(250, 250, 35, 0, Math.PI * 2);
        ctx.fill();


        if (animationProgress < 100) {
            animationProgress += 1;
            requestAnimationFrame(frame);
        } else if (!animationFinished) {
            animationProgress = 100;
            animationFinished = true;

            requestAnimationFrame(frame);
        }
    }

    frame()
</script>